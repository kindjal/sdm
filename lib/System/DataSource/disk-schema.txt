CREATE TABLE IF NOT EXISTS DISK_VOLUME (
  dv_id         INTEGER PRIMARY KEY AUTOINCREMENT,
  mount_path    VARCHAR(255),
  physical_path VARCHAR(255),
  total_kb      UNSIGNED INTEGER NOT NULL DEFAULT 0,
  used_kb       UNSIGNED INTEGER NOT NULL DEFAULT 0
);
CREATE TABLE IF NOT EXISTS DISK_FILER (
  df_id         INTEGER PRIMARY KEY AUTOINCREMENT,
  hostname      VARCHAR(255),
  filer_status  UNSIGNED INTEGER NOT NULL DEFAULT 0
);
CREATE TABLE IF NOT EXISTS DISK_GROUP (
  dg_id         INTEGER PRIMARY KEY AUTOINCREMENT,
  disk_group_name VARCHAR(255),
  permissions   UNSIGNED INTEGER NOT NULL DEFAULT 0,
  sticky        UNSIGNED INTEGER NOT NULL DEFAULT 0,
  subdirectory  VARCHAR(255),
  unix_uid      UNSIGNED INTEGER NOT NULL DEFAULT 0,
  unix_gid      UNSIGNED INTEGER NOT NULL DEFAULT 0,
  user_name     VARCHAR(255),
  group_name    VARCHAR(255)
);
/*
* Use UR for triggers
CREATE TRIGGER IF NOT EXISTS VOLUME_UPDATE_CREATED AFTER INSERT ON VOLUME BEGIN UPDATE VOLUME SET created = DATETIME('NOW') where rowid = new.rowid; END;
CREATE TRIGGER IF NOT EXISTS VOLUME_UPDATE_LAST_MODIFIED AFTER UPDATE ON VOLUME BEGIN UPDATE VOLUME SET last_modified = DATETIME('NOW') where rowid = new.rowid; END;
CREATE TRIGGER IF NOT EXISTS FILER_UPDATE_CREATED AFTER INSERT ON FILER  BEGIN UPDATE FILER SET created = DATETIME('NOW') where rowid = new.rowid; END;
CREATE TRIGGER IF NOT EXISTS FILER_INSERT_LAST_MODIFIED AFTER INSERT ON FILER WHEN new.snmp_ok = 1 BEGIN UPDATE FILER SET last_modified = DATETIME('NOW') where rowid = new.rowid; END;
CREATE TRIGGER IF NOT EXISTS FILER_UPDATE_LAST_MODIFIED AFTER UPDATE OF snmp_ok ON FILER WHEN new.snmp_ok = 1 BEGIN UPDATE FILER SET last_modified = DATETIME('NOW') where rowid = new.rowid; END;
CREATE TRIGGER IF NOT EXISTS DISK_GROUP_UPDATE_CREATED AFTER INSERT ON DISK_GROUP BEGIN UPDATE DISK_GROUP SET created = DATETIME('NOW') where rowid = new.rowid; END;
CREATE TRIGGER IF NOT EXISTS DISK_GROUP_UPDATE_LAST_MODIFIED AFTER UPDATE ON DISK_GROUP BEGIN UPDATE DISK_GROUP SET last_modified = DATETIME('NOW') where rowid = new.rowid; END;
*/
