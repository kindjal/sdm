DROP TABLE HOST;
DROP TABLE FILER;
DROP TABLE VOLUME;
DROP TABLE GROUP;
/*
How do we represent a cluster filer?
*/
CREATE TABLE IF NOT EXISTS HOST (
  host_id       INTEGER PRIMARY KEY AUTOINCREMENT,
  hostname      VARCHAR(255) NOT NULL,
  host_status  UNSIGNED INTEGER NOT NULL DEFAULT 0
);
CREATE TABLE IF NOT EXISTS FILER (
  df_id         INTEGER PRIMARY KEY AUTOINCREMENT,
  hostname      VARCHAR(255) NOT NULL,
  filer_status  UNSIGNED INTEGER NOT NULL DEFAULT 0
);
CREATE TABLE IF NOT EXISTS VOLUME (
  dv_id         INTEGER PRIMARY KEY AUTOINCREMENT,
  df_id         INTEGER NOT NULL REFERENCES FILER,
  mount_path    VARCHAR(255) NOT NULL,
  physical_path VARCHAR(255) NOT NULL,
  total_kb      UNSIGNED INTEGER NOT NULL DEFAULT 0,
  used_kb       UNSIGNED INTEGER NOT NULL DEFAULT 0
);
CREATE INDEX volumeindex ON VOLUME(df_id);
CREATE TABLE IF NOT EXISTS GROUP (
  dg_id         INTEGER PRIMARY KEY AUTOINCREMENT,
  group_name VARCHAR(255) NOT NULL,
  permissions   UNSIGNED INTEGER NOT NULL DEFAULT 0,
  sticky        UNSIGNED INTEGER NOT NULL DEFAULT 0,
  subdirectory  VARCHAR(255),
  unix_uid      UNSIGNED INTEGER NOT NULL DEFAULT 0,
  unix_gid      UNSIGNED INTEGER NOT NULL DEFAULT 0,
  user_name     VARCHAR(255)
);
